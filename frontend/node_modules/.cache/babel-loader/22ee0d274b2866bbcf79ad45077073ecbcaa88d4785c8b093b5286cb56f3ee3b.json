{"ast":null,"code":"// Token cleanup utility to handle invalid tokens\nexport const clearAuthData = () => {\n  localStorage.removeItem('token');\n  localStorage.removeItem('user');\n  console.log('ðŸ§¹ Auth data cleared');\n};\nexport const isTokenValid = async () => {\n  const token = localStorage.getItem('token');\n  if (!token) return false;\n  try {\n    // Test token with a simple API call\n    const response = await fetch('http://localhost:5002/api/auth/me', {\n      headers: {\n        'Authorization': `Bearer ${token}`\n      }\n    });\n    if (response.status === 401) {\n      clearAuthData();\n      return false;\n    }\n    return response.ok;\n  } catch (error) {\n    console.error('Token validation error:', error);\n    clearAuthData();\n    return false;\n  }\n};\nexport const refreshAuthState = () => {\n  // Force a page reload to refresh auth context\n  window.location.reload();\n};","map":{"version":3,"names":["clearAuthData","localStorage","removeItem","console","log","isTokenValid","token","getItem","response","fetch","headers","status","ok","error","refreshAuthState","window","location","reload"],"sources":["C:/Users/rakir/OneDrive/Desktop/STC/frontend/src/utils/tokenCleanup.js"],"sourcesContent":["// Token cleanup utility to handle invalid tokens\r\nexport const clearAuthData = () => {\r\n  localStorage.removeItem('token');\r\n  localStorage.removeItem('user');\r\n  console.log('ðŸ§¹ Auth data cleared');\r\n};\r\n\r\nexport const isTokenValid = async () => {\r\n  const token = localStorage.getItem('token');\r\n  if (!token) return false;\r\n  \r\n  try {\r\n    // Test token with a simple API call\r\n    const response = await fetch('http://localhost:5002/api/auth/me', {\r\n      headers: {\r\n        'Authorization': `Bearer ${token}`\r\n      }\r\n    });\r\n    \r\n    if (response.status === 401) {\r\n      clearAuthData();\r\n      return false;\r\n    }\r\n    \r\n    return response.ok;\r\n  } catch (error) {\r\n    console.error('Token validation error:', error);\r\n    clearAuthData();\r\n    return false;\r\n  }\r\n};\r\n\r\nexport const refreshAuthState = () => {\r\n  // Force a page reload to refresh auth context\r\n  window.location.reload();\r\n};"],"mappings":"AAAA;AACA,OAAO,MAAMA,aAAa,GAAGA,CAAA,KAAM;EACjCC,YAAY,CAACC,UAAU,CAAC,OAAO,CAAC;EAChCD,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;EAC/BC,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;AACrC,CAAC;AAED,OAAO,MAAMC,YAAY,GAAG,MAAAA,CAAA,KAAY;EACtC,MAAMC,KAAK,GAAGL,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACD,KAAK,EAAE,OAAO,KAAK;EAExB,IAAI;IACF;IACA,MAAME,QAAQ,GAAG,MAAMC,KAAK,CAAC,mCAAmC,EAAE;MAChEC,OAAO,EAAE;QACP,eAAe,EAAE,UAAUJ,KAAK;MAClC;IACF,CAAC,CAAC;IAEF,IAAIE,QAAQ,CAACG,MAAM,KAAK,GAAG,EAAE;MAC3BX,aAAa,CAAC,CAAC;MACf,OAAO,KAAK;IACd;IAEA,OAAOQ,QAAQ,CAACI,EAAE;EACpB,CAAC,CAAC,OAAOC,KAAK,EAAE;IACdV,OAAO,CAACU,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IAC/Cb,aAAa,CAAC,CAAC;IACf,OAAO,KAAK;EACd;AACF,CAAC;AAED,OAAO,MAAMc,gBAAgB,GAAGA,CAAA,KAAM;EACpC;EACAC,MAAM,CAACC,QAAQ,CAACC,MAAM,CAAC,CAAC;AAC1B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}